# Payment Receipt Upload - Visual Guide

## User Experience Flow

### Step 1: Open Payment Modal
```
User Dashboard
â””â”€ Sidebar Menu
   â””â”€ ğŸ’³ Make Payment â† User clicks here
      â””â”€ Payment Modal Opens
```

### Step 2: Payment Modal Appears
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Make a Payment                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ Upload your payment receipt for    â”‚
â”‚ verification by your group leader  â”‚
â”‚                                     â”‚
â”‚ Amount (RWF)     [_____________]  â”‚
â”‚                                     â”‚
â”‚ Payment Method   [Select â–¼]        â”‚
â”‚                                     â”‚
â”‚ Mobile Number    [_____________]   â”‚
â”‚ (shown if Mobile selected)          â”‚
â”‚                                     â”‚
â”‚ Bank Details     [_____________]   â”‚
â”‚ (shown if Bank selected)            â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Upload Payment Receipt        â”‚  â”‚
â”‚ â”‚  ğŸ“ Click to upload or        â”‚  â”‚
â”‚ â”‚     drag and drop             â”‚  â”‚
â”‚ â”‚                               â”‚  â”‚
â”‚ â”‚ Accepted: PDF, JPG, PNG       â”‚  â”‚
â”‚ â”‚ Max size: 5MB                 â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚ Important: Receipt will be        â”‚
â”‚ verified by group leader          â”‚
â”‚                                     â”‚
â”‚              [Send Request]  [X]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 3: After File Selection
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Make a Payment                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ [Form fields...]                   â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ âœ“ receipt.pdf                 â”‚  â”‚
â”‚ â”‚ ğŸ‰ File uploaded successfully â”‚  â”‚
â”‚ â”‚              [Remove]         â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚              [Send Request]  [X]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 4: Sending Request
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Make a Payment                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ [Form fields...]                   â”‚
â”‚                                     â”‚
â”‚    [â³ Sending...]  [X]            â”‚
â”‚ (Button disabled, loading spinner)  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 5: Success
```
âœ… Success Alert
"Payment request sent to leader for approval. 
We will notify you once it is verified."

Modal closes
Form clears
```

---

## Error Scenarios

### Missing Amount
```
User clicks "Send Request" without amount
â””â”€ Alert appears: âš ï¸ "Please enter amount"
â””â”€ Modal stays open
â””â”€ User can fix and retry
```

### Amount Too Low
```
User enters 25000 (< 50000 minimum)
â””â”€ Clicks "Send Request"
â””â”€ Alert appears: âš ï¸ "Minimum amount is 50,000 RWF"
â””â”€ Modal stays open
```

### Invalid File Type
```
User selects document.docx
â””â”€ Tries to upload
â””â”€ Alert: âš ï¸ "Please select a PDF or image file (JPG, PNG)"
â””â”€ File not selected
â””â”€ Upload area still shows
```

### File Too Large
```
User selects 10mb_video.mp4
â””â”€ Tries to upload
â””â”€ Alert: âš ï¸ "File size must be less than 5MB"
â””â”€ File not selected
â””â”€ Upload area still shows
```

### No Receipt Uploaded
```
User fills form but skips receipt
â””â”€ Clicks "Send Request"
â””â”€ Alert: âš ï¸ "Please upload a payment receipt"
â””â”€ Modal stays open
```

### Network Error (Backend issue)
```
User completes form correctly
â””â”€ Clicks "Send Request"
â””â”€ Button shows loading spinner
â””â”€ Backend doesn't respond
â””â”€ Alert: âš ï¸ "Error: [error details]"
â””â”€ Button re-enabled
â””â”€ User can retry
```

---

## Form Fields Visibility

### Payment Method: Mobile Money Selected
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Payment Method [Mobile Money â–¼]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ Mobile Number                â”‚
â”‚   [+250__________] (visible)   â”‚
â”‚                                â”‚
â”‚ âœ— Bank Details                 â”‚
â”‚   [________________] (hidden)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Payment Method: Bank Transfer Selected
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Payment Method [Bank Transfer â–¼]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ— Mobile Number                â”‚
â”‚   [+250__________] (hidden)    â”‚
â”‚                                â”‚
â”‚ âœ“ Bank Details                 â”‚
â”‚   [________________] (visible)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Visualization

```
User's Browser
â”‚
â”œâ”€ Form Input
â”‚  â”œâ”€ amount: "50000"
â”‚  â”œâ”€ method: "mobile"
â”‚  â”œâ”€ mobileNumber: "+250781234567"
â”‚  â””â”€ receipt: [File object]
â”‚
â””â”€ Form Validation
   â”œâ”€ amount >= 50000? âœ“
   â”œâ”€ method selected? âœ“
   â”œâ”€ receipt exists? âœ“
   â”œâ”€ receipt.type in [jpg, png, pdf]? âœ“
   â””â”€ receipt.size <= 5MB? âœ“
      â”‚
      â””â”€ All checks pass âœ“
         â”‚
         â””â”€ Create FormData
            â”œâ”€ amount
            â”œâ”€ method
            â”œâ”€ receipt (binary)
            â”œâ”€ groupId
            â”œâ”€ mobileNumber
            â””â”€ [Content-Type: multipart/form-data]
               â”‚
               â””â”€ POST /api/payments/request
                  â”œâ”€ Header: Authorization: Bearer {token}
                  â”œâ”€ Header: Content-Type: multipart/form-data
                  â””â”€ Body: FormData with file
                     â”‚
                     â””â”€ Backend Processing
                        (Not yet implemented)
                        â”œâ”€ Validate file
                        â”œâ”€ Store file
                        â”œâ”€ Create request record
                        â”œâ”€ Set status: pending
                        â””â”€ Notify leader
                           â”‚
                           â””â”€ Response 201
                              â”œâ”€ requestId: "preq_abc123"
                              â”œâ”€ status: "pending"
                              â””â”€ createdAt: "2024-01-15..."
                                 â”‚
                                 â””â”€ Frontend
                                    â”œâ”€ Hide loading spinner
                                    â”œâ”€ Show success message
                                    â”œâ”€ Close modal
                                    â”œâ”€ Clear form
                                    â””â”€ Refresh dashboard
```

---

## File Upload Process

```
Step 1: Click Upload Area
â””â”€ File dialog opens
   â””â”€ User browses system

Step 2: Select File
â””â”€ File selected: "receipt.pdf"
â””â”€ onChange event fires

Step 3: Validate File
â”œâ”€ Check type: "application/pdf" âœ“
â”œâ”€ Check size: 1.2MB < 5MB âœ“
â””â”€ All valid âœ“

Step 4: Show Preview
â”œâ”€ Hide upload area
â”œâ”€ Show preview section
â”œâ”€ Display filename
â””â”€ Show "Remove" button

Step 5: Ready to Submit
â””â”€ User reviews form
â””â”€ Clicks "Send Request"
```

---

## Browser Developer Tools View

### Network Tab - Request Details
```
POST /api/payments/request

Request Headers:
  Authorization: Bearer eyJhbGci...
  Content-Type: multipart/form-data; boundary=----WebKitFormBoundary...
  Host: localhost:5000

Request Payload (FormData):
  ----WebKitFormBoundary7MA4YWxkTrZu0gW
  Content-Disposition: form-data; name="amount"
  
  50000
  ----WebKitFormBoundary7MA4YWxkTrZu0gW
  Content-Disposition: form-data; name="method"
  
  mobile
  ----WebKitFormBoundary7MA4YWxkTrZu0gW
  Content-Disposition: form-data; name="receipt"; filename="receipt.pdf"
  Content-Type: application/pdf
  
  [binary file data...]
  ----WebKitFormBoundary7MA4YWxkTrZu0gW
  Content-Disposition: form-data; name="groupId"
  
  group_123
  ----WebKitFormBoundary7MA4YWxkTrZu0gW--

Response (201 Created):
  {
    "id": "preq_abc123",
    "status": "pending",
    "amount": 50000,
    "method": "mobile",
    "receiptUrl": "/uploads/receipts/user_789_preq_abc123_1705329045.pdf"
  }
```

### Console View
```javascript
// When file selected
File: {
  name: "receipt.pdf",
  size: 1234567,
  type: "application/pdf",
  lastModified: 1705329045000
}

// When form submitted
Payment request submitted: {
  id: "preq_abc123",
  status: "pending",
  createdAt: "2024-01-15T10:30:45Z"
}
```

---

## Mobile View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¼ User Dashboard    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’³ Make Payment  â† âœ“ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Make a Payment       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Amount         â”‚   â”‚
â”‚ â”‚ [____________] â”‚   â”‚
â”‚ â”‚                â”‚   â”‚
â”‚ â”‚ Method         â”‚   â”‚
â”‚ â”‚ [Select â–¼]     â”‚   â”‚
â”‚ â”‚                â”‚   â”‚
â”‚ â”‚ Mobile Number  â”‚   â”‚
â”‚ â”‚ [____________] â”‚   â”‚
â”‚ â”‚                â”‚   â”‚
â”‚ â”‚ ğŸ“ Upload      â”‚   â”‚
â”‚ â”‚  Tap to upload â”‚   â”‚
â”‚ â”‚                â”‚   â”‚
â”‚ â”‚ [Send Request] â”‚   â”‚
â”‚ â”‚                â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Timeline - What Happens

```
T+0s:   User clicks "Make Payment"
T+0.1s: Modal appears
T+1s:   User fills form
T+5s:   User selects file
T+5.2s: File validated
T+5.3s: Preview shows
T+8s:   User clicks "Send Request"
T+8.1s: Form validation runs
T+8.2s: Loading spinner appears
T+8.3s: FormData created
T+8.4s: Network request sent
T+8.5s: Backend receives request
T+12s:  Backend processes file (simulated)
T+12.1s: Backend creates request record
T+12.2s: Response sent to frontend
T+12.3s: Success message shown
T+12.5s: Modal closes
T+12.6s: Form clears
T+12.7s: Dashboard refreshes
T+13s:  User sees updated dashboard
```

---

## Color Scheme

- **Primary (Blue):** Buttons, links
- **Success (Green):** File accepted, success messages
- **Warning (Orange):** File size warning
- **Error (Red):** Error alerts
- **Muted (Gray):** Helper text, disabled states

---

## Animations

- **Modal Open:** Fade in + slide up (200ms)
- **File Preview:** Slide down (100ms)
- **Button Loading:** Spinner rotation (infinite)
- **Success Alert:** Fade in (200ms)
- **Modal Close:** Slide down + fade out (200ms)

---

## Accessibility Features

âœ“ All form fields have labels
âœ“ File upload area has accessible name
âœ“ Error messages announced to screen readers
âœ“ Keyboard navigation supported (Tab, Enter)
âœ“ Escape key closes modal
âœ“ Focus indicators visible
âœ“ Color not only indicator (text + icons)
âœ“ Sufficient contrast ratios

---

## Translation Strings

The following text will be translated based on user language:
- Form labels
- Error messages
- Success messages
- Button text
- Helper text

Currently supported: English, Kinyarwanda, French

---

## Summary

**Users will experience:**
1. âœ“ Simple form to make payment
2. âœ“ Easy file upload with preview
3. âœ“ Clear error messages if anything goes wrong
4. âœ“ Confirmation when request sent
5. âœ“ Assurance that leader will verify payment
6. âœ“ Next: Notification when payment approved

**Developers will see:**
1. âœ“ FormData with complete file upload
2. âœ“ Proper multipart encoding
3. âœ“ JWT authentication included
4. âœ“ All form data in request body
5. âœ“ Ready for backend processing
